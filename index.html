<!--#include file="layout.html" -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Lateef&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link  rel="stylesheet" href ="styles.css">
<script src="utils.js"></script>
    <title>Naome's Portofolio</title>
</head>
<body>
    
    <nav class="navbar navbar-expand-lg bg-transparent bg-light">
        <a class="navbar-brand py-3" style="margin-left: 16%;" href="#">NAOME JOYEUSE</a>
        <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse col-md-8 justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#home">HOME</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#About-me">ABOUT</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#portofolio">PORTFOLIO</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#blog-section">BLOGS</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#contact-section py-5">CONTACT</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="login.html">LOGIN</a>
                </li>
            </ul>
        </div>
    </nav>
            
      <section class="home">
      <div class="image">
        <img src="images/home_img.jpg" class="girl">
      </div>
      <div class="home-details">
        <p class="detail-title">HELLO, MY NAME IS</p>
        <hr class="line" style="width: 80px; height: 3px; position: absolute; left: 350px; top: 270px; background-color: black;">
        <h3 class="detail-name">Naome Joyeuse</h3>
        <p class="detail-job">Full Stack Developer</p>
        <div > 
            <p class="detail-email"><img src="images/icons8-email-96.png" alt="icon">kanyananome5@gmail.com</p>
        </div>
        <p class="contact"><img src="images/icons8-call-50.png" alt="icon">+250798287672</p>
      </div>
     
     
    </section>
  
    <section id="About-me">
        <div class="container about">
            <h3 class="text-center">About Me</h3>
            <div class="row align-items-center">
                <div class="col-md-4">
                    <img src="/images/usepgf.png" class="img-fluid rounded" alt="Your Image">
                </div>
                <div class="col-md-8 d-flex flex-column justify-content-center">
                    <div>
                        <h4 class="mb-3">I am an enthusiastic web developer based in Rwanda, with over 3 years of experience in website & product design.</h4>
                        <p>With a strong background in graphic and web design, I excel at understanding client needs and delivering modern, effective solutions. My expertise spans front-end development, landing pages, email design, and mobile UI/UX design. Let's collaborate to bring your ideas to life.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    

    <!-- portofolio-->
    <section id="portofolio">
        <h3 style="text-align: center;">PORTFOLIO</h3>
        <div class="portofolio-container">
            <div class="container my-5">
                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
             
                    <div class="col">
                        <div class="card">
                            <img src="images/learning.jpeg" class="card-img-top" alt="E-Learning Project">
                            <div class="card-body">
                                <h5 class="card-title">E-Learning Platform</h5>
                                <p class="card-text1">A comprehensive online learning platform designed for students and school staff, providing a range of educational resources and interactive courses.</p>
                                <p class="card-text1">Developed using ASP.NET and SQL Server.</p>
                                <p class="card-duration">Duration: 6 weeks</p>
                                <a href="#" class="btn btn-primary">Learn More</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <img src="images/quiz1.jpeg" class="card-img-top" alt="Online Quiz App">
                            <div class="card-body">
                                <h5 class="card-title">Online Quiz App</h5>
                                <p class="card-text1">An engaging online quiz application allowing users to create, share, and participate in quizzes across various subjects.</p>
                               
                                <p class="card-text1">Built with Java and Springboot</p>
                                <p class="card-duration">Duration: 6 weeks</p>
                                <a href="#" class="btn btn-primary">Learn More</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <img src="images/cancer.jpg" class="card-img-top" alt="Cancer Detection System">
                            <div class="card-body">
                                <h5 class="card-title">Cancer Detection System</h5>
                                <p class="card-text1">An advanced cancer detection system utilizing machine learning algorithms to assist in early diagnosis and treatment planning.</p>
                                <p class="card-text1">Implemented using Python and Django.</p>
                                <p class="card-duration">Duration: 6 weeks</p>
                                <a href="#" class="btn btn-primary">Learn More</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <img src="images/transport.jpg" class="card-img-top" alt="Transport Management System">
                            <div class="card-body">
                                <h5 class="card-title">Transport Management System</h5>
                                <p class="card-text1">A comprehensive transport management system that optimizes logistics, vehicle tracking, and route planning for transportation companies.</p>
                                <p class="card-text1">Built with Angular and .NET Core.</p>
                                <p class="card-duration">Duration: 6 weeks</p>
                                <a href="#" class="btn btn-primary">Learn More</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <img src="images/tecoomerce.jpg" class="card-img-top" alt="E-Commerce Project">
                            <div class="card-body">
                                <h5 class="card-title">E-Commerce Platform</h5>
                                <p class="card-text1">A dynamic e-commerce platform providing a seamless shopping experience with a wide range of products and secure payment options.</p>
                                <p class="card-text1">Backend developed with Java Spring Boot and frontend with React.</p>
                                <p class="card-duration">Duration: 6 weeks</p>
                                <a href="#" class="btn btn-primary">Learn More</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <img src="images/immigration.jpg" class="card-img-top" alt="Immigration Management System">
                            <div class="card-body">
                                <h5 class="card-title">Immigration Management System</h5>
                                <p class="card-text1">A robust system designed to streamline the immigration process, handling applications, visas, and residency permits efficiently.</p>
                                <p class="card-text1">Developed using Java</p>
                                <p class="card-duration">Duration: 6 weeks</p>
                                <a href="#" class="btn btn-primary">Learn More</a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
    <!-- blogs -->
    <section id="blog-section">
        <h3 style="text-align: center;">Blogs</h3>
        <div class="container">
            <div class="row row-cols-1 row-cols-md-2 g-4" id="blog-container">
            
            
            </div>
        </div>
    </section>
    
    
    <section id="contact-section py-5">
        <div class="container">
            <h3 class="text-center mb-4">Contact Me</h3>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <form>
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="subject" class="form-label">Subject</label>
                            <input type="text" class="form-control" id="subject" required>
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Message</label>
                            <textarea class="form-control" id="message" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Send</button>
                    </form>
                </div>
                <div class="contact-touch col-md-6 mb-4 d-flex align-items-center">
                    <div class="contact-touch">
                        <h5>Let's Get In Touch</h5>
                        <p>If you have any questions, feel free to contact me using the form. I'm always open to discussing new projects, creative ideas, or opportunities to be part of your visions.</p>           
                </div>
            </div>
        </div>
    </section>
    
    <footer class="footer mt-auto py-3">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5>About Me</h5>
                    <p>Passionate developer with a commitment to excellence. Skilled in problem-solving and collaboration. Let's create something great!</p>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Portofolio</a></li>
                        <li><a href="#">Blogs</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5>Contact Us</h5>
                    <ul class="list-unstyled">
                        <li>Email: kanyananaome5@gmail.com</li>
                        <li>Phone: +250798287672</li>
                        <li>Address: Kigali,Rwanda</li>
                    </ul>
                    <h5>Social</h5>
                    <a href="#" class="mr-2"><img src="/images/icons8_github_40px.png" alt="Github" width="30"></a>
                    <a href="#" class="mr-2"><img src="/images/icons8_instagram_40px.png" alt="Instagram" width="30"></a>
                    <a href="#"><img src="/images/icons8_linkedin_40px.png" alt="LinkedIn" width="30"></a>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col text-center">
                    <p class="mb-0">&copy; 2024 Naome Joyeuse. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const blogContainer = document.getElementById('blog-container');
            const token = localStorage.getItem('authToken');
            const isAuthenticated = !!token;
           

            try {
                const response = await fetch('https://blogs-backend-backup.onrender.com/api/blogs', {
                    method: 'GET',
                    headers: new Headers({
                
                    })
                });

                if (response.ok) {
                    const blogs = await response.json();
                    const blogIds = blogs.map(blog => blog._id);

                    blogs.forEach(blog => {
                        // commentsCount[blog._id] = blog.commentsCount || 0;
                        
                        const blogCardHTML = `
                            <div class="col mb-4">
                                <div class="blog-card">
                                    <div class="row g-0">
                                        <div class="col-md-4">
                                            <img src="${blog.image || '/images/default-image.jpg'}" class="img-fluid rounded-start" alt="${blog.title}">
                                        </div>
                                        <div class="col-md-8 ms-3">
                                            <div class="card-body-blog">
                                                <h5 class="card-title">${blog.title}</h5>
                                                <p class="card-text">${blog.content.substring(0, 100)}...</p>
                                                 <a href="detailed_blog.html?id=${blog._id}" class="read-more-link">Read More</a>
                                                <p class="card-text"><small class="text-muted">${new Date(blog.date).toLocaleString()}</small></p>
                                                <div class="interaction">
                                                    <button class="btn btn-outline-primary btn-sm like-button ${blog.isLiked ? 'liked' : ''}" data-id="${blog._id}">
                                                      <i class="fas fa-thumbs-up"></i> <span class="like-count">${blog.likesCount}</span>
                                                    </button>
                                                      <button class="btn btn-outline-secondary btn-sm comment-button" data-id="${blog._id}">
                                               </i> <i class="fas fa-comments"></i> <span class="comment-count">...</span>
                                            </button>
                                                </div>
                                                <div class="comments-section" id="comments-${blog._id}" style="display: none;">
                                            <ul class="list-unstyled comment-list" id="comment-list-${blog._id}">
                                                <!-- Comments will be dynamically added here -->
                                            </ul>
                                        
                                        </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        blogContainer.innerHTML += blogCardHTML;
                    });

                   ///get comments
                   for (const blogId of blogIds) {
                try {
                    const commentResponse = await fetch(`https://blogs-backend-backup.onrender.com/api/blogs/${blogId}/comments`, {
                        method: 'GET',
                        headers: new Headers({
                            'Authorization': token
                        })
                    });

                    if (commentResponse.ok) {
                        const comments = await commentResponse.json();
                        const commentCount = comments.length;
                        document.querySelector(`.comment-button[data-id="${blogId}"] .comment-count`).textContent = commentCount;
                    } else {
                        console.error(`Failed to fetch comments for blog ${blogId}`);
                    }
                } catch (error) {
                    console.error(`Error fetching comments for blog ${blogId}:`, error);
                }
            }


            blogContainer.addEventListener('click', async (event) => {
                const likeButton = event.target.closest('.like-button');
                if (likeButton) {
                    event.preventDefault();
                  
                    const postId = likeButton.getAttribute('data-id');
                    const likeCountElement = likeButton.querySelector('.like-count');

                    try { 
                const likeResponse = await fetchWithToken(`https://blogs-backend-backup.onrender.com/api/blogs/${postId}/like`, {
                    method: 'POST'
                });

                        if (likeResponse.ok) {
                            const result = await likeResponse.json();
                            if (result.message === 'Like added') {
                                likeCountElement.textContent = parseInt(likeCountElement.textContent) + 1;
                                likeButton.classList.add('liked');
                            } else if (result.message === 'Like removed') {
                                likeCountElement.textContent = Math.max(0, parseInt(likeCountElement.textContent) - 1);
                                likeButton.classList.remove('liked');
                            }
                        } else {
                            const errorText = await likeResponse.text();
                            console.error('Failed to like blog:', errorText);
                        }
                    } catch (error) {
                        console.error('Error liking the blog:', error);
                    }
                }
            });


            ///comment

            document.querySelectorAll('.comment-button').forEach(button => {
                button.addEventListener('click', async (event) => {
                    const postId = button.getAttribute('data-id');
                    const commentsSection = document.getElementById(`comments-${postId}`);
                    if (commentsSection.style.display === 'none') {
                        commentsSection.style.display = 'block';
                        
                        try {
                            const commentsResponse = await fetch(`https://blogs-backend-backup.onrender.com/api/blogs/${postId}/comments`, {
                                method: 'GET',
                                headers: new Headers({
                                    'Authorization': token
                                })
                            });

                            if (commentsResponse.ok) {
                                const comments = await commentsResponse.json();
                                const commentList = document.getElementById(`comment-list-${postId}`);
                                commentList.innerHTML = '';
                                
                                comments.forEach(comment => {
                                    const commentHTML = `
                                        <li class="mb-2">
                                            <div class="comment">
                                                <p><strong>User ${comment.user}</strong>: ${comment.content}</p>
                                            </div>
                                        </li>
                                    `;
                                    commentList.innerHTML += commentHTML;
                                });
                                commentsCount[postId] = comments.length;
                                button.querySelector('.comment-count').textContent = commentsCount[postId];
                            } else {
                                console.error('Failed to fetch comments');
                            }
                        } catch (error) {
                            console.error('Error fetching comments:', error);
                        }
                    } else {
                        commentsSection.style.display = 'none';
                    }
                });
            });

            document.querySelectorAll('.comment-form').forEach(form => {
                form.addEventListener('submit', async (event) => {
                    event.preventDefault();
                    const postId = form.getAttribute('id').split('-')[2];
                    const textarea = form.querySelector('textarea');
                    const content = textarea.value;
                    
                    try {
                        const commentResponse = await fetch(`https://blogs-backend-backup.onrender.com/api/blogs/${postId}/comments`, {
                            method: 'POST',
                            headers: new Headers({
                                'Authorization': token,
                                'Content-Type': 'application/json'
                            }),
                            body: JSON.stringify({ content })
                        });

                        if (commentResponse.ok) {
                            const newComment = await commentResponse.json();
                            const commentList = document.getElementById(`comment-list-${postId}`);
                            const commentHTML = `
                                <li class="mb-2">
                                    <div class="comment">
                                        <p><strong>User ${newComment.user}</strong>: ${newComment.content}</p>
                                    </div>
                                </li>
                            `;
                            commentList.innerHTML += commentHTML;
                            textarea.value = ''; 
                            const commentCountButton = document.querySelector(`.comment-button[data-id="${postId}"] .comment-count`);
                            const currentCount = parseInt(commentCountButton.textContent) || 0;
                            commentCountButton.textContent = currentCount + 1;

                        } else {
                            console.error('Failed to add comment');
                        }
                    } catch (error) {
                        console.error('Error adding comment:', error);
                    }
                });
            });

        } else {
            console.error('Failed to fetch blogs');
        }
    } catch (error) {
        console.error('Error fetching blogs:', error);
    }
        
});
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>